{% extends 'base_generic.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
<style>
    .detail-content {
        min-height: 300px;
        border: 2px dashed blue; 
    }
</style>
{% endblock %}

{% block content %}
<div class="container detail-container">
    <div class="detail-header">
        <h2>{{ post.title }}</h2>
    </div>
    <div class="detail-content">
        <p>{{ post.content }}</p>
    </div>
    <div class="action-buttons">
        <a href="{% url 'diary:post_list' %}" class="btn btn-info">글 목록</a>
        <a id="editBtn" href="{% url 'diary:post_edit' pk=post.pk %}" class="btn btn-primary">글 수정</a>
        <a id="deleteBtn" href="javascript:void(0);" class="btn btn-danger">글 삭제</a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var editBtn = document.getElementById('editBtn');
    var deleteBtn = document.getElementById('deleteBtn');

    // 사용자 인증 상태 확인
    var isAuthenticated = {% if request.user.is_authenticated %} true {% else %} false {% endif %};

    // 사용자 인증 상태에 따라 버튼 활성화/비활성화
    if (!isAuthenticated) {
        editBtn.setAttribute('onclick', "alert('로그인이 필요합니다.')");
        deleteBtn.setAttribute('onclick', "alert('로그인이 필요합니다.')");
    }
});
</script>
{% endblock %}
